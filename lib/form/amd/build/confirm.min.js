define ("core_form/confirm",["exports","core/notification","core/modal_factory","core/modal_events","core/str","core/templates","core/loadingicon"],function(a,b,c,d,e,f,g){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=h(b);c=h(c);d=h(d);e=h(e);f=h(f);g=h(g);function h(a){return a&&a.__esModule?a:{default:a}}var j,k,l=g.default.getIcon(),m=function(){e.default.get_string("confirm","core_form").then(function(a){c.default.create({type:c.default.types.SAVE_CANCEL,title:a,body:l,large:!0}).done(function(a){j=a;var b=j.getRoot();a.setButtonText("save",e.default.get_string("yes"));a.setButtonText("cancel",e.default.get_string("no"));b.on(d.default.save,function(){var a=document.getElementById(k);a.submit()})})}).catch(function(){b.default.exception(new Error("Failed to load string: loading"))})};function i(a){j.setBody(l);j.show();f.default.renderForPromise("core_form/modal_confirm",{notices:a}).then(function(a){var b=a.html;j.setBody(b)}).catch(function(){b.default.exception(new Error("Failed to load template: core_form/modal_confirm"))})}var n=function(a){if("cancel"===a.submitter.name){return}a.preventDefault();var b=a.target,c=[],d=b.querySelectorAll("[data-confirm]");d.forEach(function(a){if("checkbox"===a.type&&a.checked!=!!+a.dataset.confirm||"undefined"!=typeof a.value&&a.value!=a.dataset.confirm){var b={label:a.labels[0].textContent.trim()};if(a.dataset.confirmdesc!==void 0){b.description=a.dataset.confirmdesc}c.push(b)}});if(c.length){i(c);return}document.getElementById(k).submit()};a.init=function init(a){k=a;m();var b=document.getElementById(a);b.addEventListener("submit",n)}});
//# sourceMappingURL=confirm.min.js.map
