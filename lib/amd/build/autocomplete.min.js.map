{"version":3,"file":"autocomplete.min.js","sources":["../src/autocomplete.js"],"sourcesContent":["/* !\n * autoComplete.js v10.2.7\n * https://tarekraafat.github.io/autoComplete.js\n * (c) 2022 autoComplete.js Contributors\n * Released under the MIT License\n */\n\n/**\n * Description of import into Moodle:\n *\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.autoComplete = factory());\n})(this, (function () { 'use strict';\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      enumerableOnly && (symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      })), keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = null != arguments[i] ? arguments[i] : {};\n      i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n\n    return target;\n  }\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n      return typeof obj;\n    } : function (obj) {\n      return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    }, _typeof(obj);\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _createForOfIteratorHelper(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n    if (!it) {\n      if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n        if (it) o = it;\n        var i = 0;\n\n        var F = function () {};\n\n        return {\n          s: F,\n          n: function () {\n            if (i >= o.length) return {\n              done: true\n            };\n            return {\n              done: false,\n              value: o[i++]\n            };\n          },\n          e: function (e) {\n            throw e;\n          },\n          f: F\n        };\n      }\n\n      throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n\n    var normalCompletion = true,\n        didErr = false,\n        err;\n    return {\n      s: function () {\n        it = it.call(o);\n      },\n      n: function () {\n        var step = it.next();\n        normalCompletion = step.done;\n        return step;\n      },\n      e: function (e) {\n        didErr = true;\n        err = e;\n      },\n      f: function () {\n        try {\n          if (!normalCompletion && it.return != null) it.return();\n        } finally {\n          if (didErr) throw err;\n        }\n      }\n    };\n  }\n\n  var select$1 = function select(element) {\n    return typeof element === \"string\" ? document.querySelector(element) : element();\n  };\n  var create = function create(tag, options) {\n    var el = typeof tag === \"string\" ? document.createElement(tag) : tag;\n    for (var key in options) {\n      var val = options[key];\n      if (key === \"inside\") {\n        val.append(el);\n      } else if (key === \"dest\") {\n        select$1(val[0]).insertAdjacentElement(val[1], el);\n      } else if (key === \"around\") {\n        var ref = val;\n        ref.parentNode.insertBefore(el, ref);\n        el.append(ref);\n        if (ref.getAttribute(\"autofocus\") != null) ref.focus();\n      } else if (key in el) {\n        el[key] = val;\n      } else {\n        el.setAttribute(key, val);\n      }\n    }\n    return el;\n  };\n  var getQuery = function getQuery(field) {\n    return field instanceof HTMLInputElement || field instanceof HTMLTextAreaElement ? field.value : field.innerHTML;\n  };\n  var format = function format(value, diacritics) {\n    value = String(value).toLowerCase();\n    return diacritics ? value.normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").normalize(\"NFC\") : value;\n  };\n  var debounce = function debounce(callback, duration) {\n    var timer;\n    return function () {\n      clearTimeout(timer);\n      timer = setTimeout(function () {\n        return callback();\n      }, duration);\n    };\n  };\n  var checkTrigger = function checkTrigger(query, condition, threshold) {\n    return condition ? condition(query) : query.length >= threshold;\n  };\n  var mark = function mark(value, cls) {\n    return create(\"mark\", _objectSpread2({\n      innerHTML: value\n    }, typeof cls === \"string\" && {\n      \"class\": cls\n    })).outerHTML;\n  };\n\n  var configure = (function (ctx) {\n    var name = ctx.name,\n        options = ctx.options,\n        resultsList = ctx.resultsList,\n        resultItem = ctx.resultItem;\n    for (var option in options) {\n      if (_typeof(options[option]) === \"object\") {\n        if (!ctx[option]) ctx[option] = {};\n        for (var subOption in options[option]) {\n          ctx[option][subOption] = options[option][subOption];\n        }\n      } else {\n        ctx[option] = options[option];\n      }\n    }\n    ctx.selector = ctx.selector || \"#\" + name;\n    resultsList.destination = resultsList.destination || ctx.selector;\n    resultsList.id = resultsList.id || name + \"_list_\" + ctx.id;\n    resultItem.id = resultItem.id || name + \"_result\";\n    ctx.input = select$1(ctx.selector);\n  });\n\n  var eventEmitter = (function (name, ctx) {\n    ctx.input.dispatchEvent(new CustomEvent(name, {\n      bubbles: true,\n      detail: ctx.feedback,\n      cancelable: true\n    }));\n  });\n\n  var search = (function (query, record, options) {\n    var _ref = options || {},\n        mode = _ref.mode,\n        diacritics = _ref.diacritics,\n        highlight = _ref.highlight;\n    var nRecord = format(record, diacritics);\n    record = String(record);\n    query = format(query, diacritics);\n    if (mode === \"loose\") {\n      query = query.replace(/ /g, \"\");\n      var qLength = query.length;\n      var cursor = 0;\n      var match = Array.from(record).map(function (character, index) {\n        if (cursor < qLength && nRecord[index] === query[cursor]) {\n          character = highlight ? mark(character, highlight) : character;\n          cursor++;\n        }\n        return character;\n      }).join(\"\");\n      if (cursor === qLength) return match;\n    } else {\n      var _match = nRecord.indexOf(query);\n      if (~_match) {\n        query = record.substring(_match, _match + query.length);\n        _match = highlight ? record.replace(query, mark(query, highlight)) : record;\n        return _match;\n      }\n    }\n  });\n\n  var getData = function getData(ctx, query) {\n    return new Promise(function ($return, $error) {\n      var data;\n      data = ctx.data;\n      if (data.cache && data.store) return $return();\n      return new Promise(function ($return, $error) {\n        if (typeof data.src === \"function\") {\n          return data.src(query).then($return, $error);\n        }\n        return $return(data.src);\n      }).then(function ($await_4) {\n        try {\n          ctx.feedback = data.store = $await_4;\n          eventEmitter(\"response\", ctx);\n          return $return();\n        } catch ($boundEx) {\n          return $error($boundEx);\n        }\n      }, $error);\n    });\n  };\n  var findMatches = function findMatches(query, ctx) {\n    var data = ctx.data,\n        searchEngine = ctx.searchEngine;\n    var matches = [];\n    data.store.forEach(function (value, index) {\n      var find = function find(key) {\n        var record = key ? value[key] : value;\n        var match = typeof searchEngine === \"function\" ? searchEngine(query, record) : search(query, record, {\n          mode: searchEngine,\n          diacritics: ctx.diacritics,\n          highlight: ctx.resultItem.highlight\n        });\n        if (!match) return;\n        var result = {\n          match: match,\n          value: value\n        };\n        if (key) result.key = key;\n        matches.push(result);\n      };\n      if (data.keys) {\n        var _iterator = _createForOfIteratorHelper(data.keys),\n            _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var key = _step.value;\n            find(key);\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      } else {\n        find();\n      }\n    });\n    if (data.filter) matches = data.filter(matches);\n    var results = matches.slice(0, ctx.resultsList.maxResults);\n    ctx.feedback = {\n      query: query,\n      matches: matches,\n      results: results\n    };\n    eventEmitter(\"results\", ctx);\n  };\n\n  var Expand = \"aria-expanded\";\n  var Active = \"aria-activedescendant\";\n  var Selected = \"aria-selected\";\n  var feedback = function feedback(ctx, index) {\n    ctx.feedback.selection = _objectSpread2({\n      index: index\n    }, ctx.feedback.results[index]);\n  };\n  var render = function render(ctx) {\n    var resultsList = ctx.resultsList,\n        list = ctx.list,\n        resultItem = ctx.resultItem,\n        feedback = ctx.feedback;\n    var matches = feedback.matches,\n        results = feedback.results;\n    ctx.cursor = -1;\n    list.innerHTML = \"\";\n    if (matches.length || resultsList.noResults) {\n      var fragment = new DocumentFragment();\n      results.forEach(function (result, index) {\n        var element = create(resultItem.tag, _objectSpread2({\n          id: \"\".concat(resultItem.id, \"_\").concat(index),\n          role: \"option\",\n          innerHTML: result.match,\n          inside: fragment\n        }, resultItem[\"class\"] && {\n          \"class\": resultItem[\"class\"]\n        }));\n        if (resultItem.element) resultItem.element(element, result);\n      });\n      list.append(fragment);\n      if (resultsList.element) resultsList.element(list, feedback);\n      open(ctx);\n    } else {\n      close(ctx);\n    }\n  };\n  var open = function open(ctx) {\n    if (ctx.isOpen) return;\n    (ctx.wrapper || ctx.input).setAttribute(Expand, true);\n    ctx.list.removeAttribute(\"hidden\");\n    ctx.isOpen = true;\n    eventEmitter(\"open\", ctx);\n  };\n  var close = function close(ctx) {\n    if (!ctx.isOpen) return;\n    (ctx.wrapper || ctx.input).setAttribute(Expand, false);\n    ctx.input.setAttribute(Active, \"\");\n    ctx.list.setAttribute(\"hidden\", \"\");\n    ctx.isOpen = false;\n    eventEmitter(\"close\", ctx);\n  };\n  var goTo = function goTo(index, ctx) {\n    var resultItem = ctx.resultItem;\n    var results = ctx.list.getElementsByTagName(resultItem.tag);\n    var cls = resultItem.selected ? resultItem.selected.split(\" \") : false;\n    if (ctx.isOpen && results.length) {\n      var _results$index$classL;\n      var state = ctx.cursor;\n      if (index >= results.length) index = 0;\n      if (index < 0) index = results.length - 1;\n      ctx.cursor = index;\n      if (state > -1) {\n        var _results$state$classL;\n        results[state].removeAttribute(Selected);\n        if (cls) (_results$state$classL = results[state].classList).remove.apply(_results$state$classL, _toConsumableArray(cls));\n      }\n      results[index].setAttribute(Selected, true);\n      if (cls) (_results$index$classL = results[index].classList).add.apply(_results$index$classL, _toConsumableArray(cls));\n      ctx.input.setAttribute(Active, results[ctx.cursor].id);\n      ctx.list.scrollTop = results[index].offsetTop - ctx.list.clientHeight + results[index].clientHeight + 5;\n      ctx.feedback.cursor = ctx.cursor;\n      feedback(ctx, index);\n      eventEmitter(\"navigate\", ctx);\n    }\n  };\n  var next = function next(ctx) {\n    goTo(ctx.cursor + 1, ctx);\n  };\n  var previous = function previous(ctx) {\n    goTo(ctx.cursor - 1, ctx);\n  };\n  var select = function select(ctx, event, index) {\n    index = index >= 0 ? index : ctx.cursor;\n    if (index < 0) return;\n    ctx.feedback.event = event;\n    feedback(ctx, index);\n    eventEmitter(\"selection\", ctx);\n    close(ctx);\n  };\n  var click = function click(event, ctx) {\n    var itemTag = ctx.resultItem.tag.toUpperCase();\n    var items = Array.from(ctx.list.querySelectorAll(itemTag));\n    var item = event.target.closest(itemTag);\n    if (item && item.nodeName === itemTag) {\n      select(ctx, event, items.indexOf(item));\n    }\n  };\n  var navigate = function navigate(event, ctx) {\n    switch (event.keyCode) {\n      case 40:\n      case 38:\n        event.preventDefault();\n        event.keyCode === 40 ? next(ctx) : previous(ctx);\n        break;\n      case 13:\n        if (!ctx.submit) event.preventDefault();\n        if (ctx.cursor >= 0) select(ctx, event);\n        break;\n      case 9:\n        if (ctx.resultsList.tabSelect && ctx.cursor >= 0) select(ctx, event);\n        break;\n      case 27:\n        ctx.input.value = \"\";\n        close(ctx);\n        break;\n    }\n  };\n\n  function start (ctx, q) {\n    var _this = this;\n    return new Promise(function ($return, $error) {\n      var queryVal, condition;\n      queryVal = q || getQuery(ctx.input);\n      queryVal = ctx.query ? ctx.query(queryVal) : queryVal;\n      condition = checkTrigger(queryVal, ctx.trigger, ctx.threshold);\n      if (condition) {\n        return getData(ctx, queryVal).then(function ($await_2) {\n          try {\n            if (ctx.feedback instanceof Error) return $return();\n            findMatches(queryVal, ctx);\n            if (ctx.resultsList) render(ctx);\n            return $If_1.call(_this);\n          } catch ($boundEx) {\n            return $error($boundEx);\n          }\n        }, $error);\n      } else {\n        close(ctx);\n        return $If_1.call(_this);\n      }\n      function $If_1() {\n        return $return();\n      }\n    });\n  }\n\n  var eventsManager = function eventsManager(events, callback) {\n    for (var element in events) {\n      for (var event in events[element]) {\n        callback(element, event);\n      }\n    }\n  };\n  var addEvents = function addEvents(ctx) {\n    var events = ctx.events;\n    var run = debounce(function () {\n      return start(ctx);\n    }, ctx.debounce);\n    var publicEvents = ctx.events = _objectSpread2({\n      input: _objectSpread2({}, events && events.input)\n    }, ctx.resultsList && {\n      list: events ? _objectSpread2({}, events.list) : {}\n    });\n    var privateEvents = {\n      input: {\n        input: function input() {\n          run();\n        },\n        keydown: function keydown(event) {\n          navigate(event, ctx);\n        },\n        blur: function blur() {\n          close(ctx);\n        }\n      },\n      list: {\n        mousedown: function mousedown(event) {\n          event.preventDefault();\n        },\n        click: function click$1(event) {\n          click(event, ctx);\n        }\n      }\n    };\n    eventsManager(privateEvents, function (element, event) {\n      if (!ctx.resultsList && event !== \"input\") return;\n      if (publicEvents[element][event]) return;\n      publicEvents[element][event] = privateEvents[element][event];\n    });\n    eventsManager(publicEvents, function (element, event) {\n      ctx[element].addEventListener(event, publicEvents[element][event]);\n    });\n  };\n  var removeEvents = function removeEvents(ctx) {\n    eventsManager(ctx.events, function (element, event) {\n      ctx[element].removeEventListener(event, ctx.events[element][event]);\n    });\n  };\n\n  function init (ctx) {\n    var _this = this;\n    return new Promise(function ($return, $error) {\n      var placeHolder, resultsList, parentAttrs;\n      placeHolder = ctx.placeHolder;\n      resultsList = ctx.resultsList;\n      parentAttrs = {\n        role: \"combobox\",\n        \"aria-owns\": resultsList.id,\n        \"aria-haspopup\": true,\n        \"aria-expanded\": false\n      };\n      create(ctx.input, _objectSpread2(_objectSpread2({\n        \"aria-controls\": resultsList.id,\n        \"aria-autocomplete\": \"both\"\n      }, placeHolder && {\n        placeholder: placeHolder\n      }), !ctx.wrapper && _objectSpread2({}, parentAttrs)));\n      if (ctx.wrapper) ctx.wrapper = create(\"div\", _objectSpread2({\n        around: ctx.input,\n        \"class\": ctx.name + \"_wrapper\"\n      }, parentAttrs));\n      if (resultsList) ctx.list = create(resultsList.tag, _objectSpread2({\n        dest: [resultsList.destination, resultsList.position],\n        id: resultsList.id,\n        role: \"listbox\",\n        hidden: \"hidden\"\n      }, resultsList[\"class\"] && {\n        \"class\": resultsList[\"class\"]\n      }));\n      addEvents(ctx);\n      if (ctx.data.cache) {\n        return getData(ctx).then(function ($await_2) {\n          try {\n            return $If_1.call(_this);\n          } catch ($boundEx) {\n            return $error($boundEx);\n          }\n        }, $error);\n      }\n      function $If_1() {\n        eventEmitter(\"init\", ctx);\n        return $return();\n      }\n      return $If_1.call(_this);\n    });\n  }\n\n  function extend (autoComplete) {\n    var prototype = autoComplete.prototype;\n    prototype.init = function () {\n      init(this);\n    };\n    prototype.start = function (query) {\n      start(this, query);\n    };\n    prototype.unInit = function () {\n      if (this.wrapper) {\n        var parentNode = this.wrapper.parentNode;\n        parentNode.insertBefore(this.input, this.wrapper);\n        parentNode.removeChild(this.wrapper);\n      }\n      removeEvents(this);\n    };\n    prototype.open = function () {\n      open(this);\n    };\n    prototype.close = function () {\n      close(this);\n    };\n    prototype.goTo = function (index) {\n      goTo(index, this);\n    };\n    prototype.next = function () {\n      next(this);\n    };\n    prototype.previous = function () {\n      previous(this);\n    };\n    prototype.select = function (index) {\n      select(this, null, index);\n    };\n    prototype.search = function (query, record, options) {\n      return search(query, record, options);\n    };\n  }\n\n  function autoComplete(config) {\n    this.options = config;\n    this.id = autoComplete.instances = (autoComplete.instances || 0) + 1;\n    this.name = \"autoComplete\";\n    this.wrapper = 1;\n    this.threshold = 1;\n    this.debounce = 0;\n    this.resultsList = {\n      position: \"afterend\",\n      tag: \"ul\",\n      maxResults: 5\n    };\n    this.resultItem = {\n      tag: \"li\"\n    };\n    configure(this);\n    extend.call(this, autoComplete);\n    init(this);\n  }\n\n  return autoComplete;\n\n}));\n"],"names":["global","factory","this","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","obj","Symbol","iterator","constructor","prototype","value","configurable","writable","_toConsumableArray","arr","Array","isArray","_arrayLikeToArray","_arrayWithoutHoles","iter","from","_iterableToArray","_unsupportedIterableToArray","TypeError","_nonIterableSpread","o","minLen","n","toString","call","slice","name","test","len","arr2","select$1","element","document","querySelector","create","tag","options","el","createElement","val","append","insertAdjacentElement","ref","parentNode","insertBefore","getAttribute","focus","setAttribute","format","diacritics","String","toLowerCase","normalize","replace","mark","cls","innerHTML","outerHTML","eventEmitter","ctx","input","dispatchEvent","CustomEvent","bubbles","detail","feedback","cancelable","search","query","record","_ref","mode","highlight","nRecord","qLength","cursor","match","map","character","index","join","_match","indexOf","substring","getData","Promise","$return","$error","data","cache","store","src","then","$await_4","$boundEx","findMatches","searchEngine","matches","find","resultItem","result","_step","_iterator","allowArrayLike","it","F","s","done","e","f","err","normalCompletion","didErr","step","next","return","_createForOfIteratorHelper","results","resultsList","maxResults","Active","selection","open","isOpen","wrapper","list","removeAttribute","close","goTo","getElementsByTagName","selected","split","_results$index$classL","_results$state$classL","state","classList","remove","add","id","scrollTop","offsetTop","clientHeight","previous","select","event","start","q","_this","queryVal","field","HTMLInputElement","HTMLTextAreaElement","condition","threshold","checkTrigger","trigger","$await_2","Error","noResults","fragment","DocumentFragment","concat","role","inside","render","$If_1","eventsManager","events","callback","addEvents","duration","timer","run","debounce","clearTimeout","setTimeout","publicEvents","privateEvents","keydown","keyCode","preventDefault","submit","tabSelect","navigate","blur","mousedown","click","itemTag","toUpperCase","items","querySelectorAll","item","closest","nodeName","addEventListener","init","placeHolder","parentAttrs","placeholder","around","dest","destination","position","hidden","extend","autoComplete","unInit","removeChild","removeEventListener","config","instances","option","subOption","selector","configure","exports","module","define","amd","globalThis","self"],"mappings":"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"}